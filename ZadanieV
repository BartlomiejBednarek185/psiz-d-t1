#include <stdlib.h>
#include <stdio.h>
#include <stdint.h>
#include <iostream>
#include <windows.h>

typedef struct {
    char signature[2];

    uint32_t size;
    uint16_t reservedA;
    uint16_t reservedB;
	uint32_t data_offset;
} header_t;

typedef struct {
    uint32_t size;
    int32_t width;
    int32_t height;
    uint16_t color_planes;
    uint16_t color_depth;
    uint32_t compression;
    uint32_t raw_size; 
    int32_t horizontal_ppm;
    int32_t vertical_ppm;
    uint32_t color_table;
    uint32_t important_colors;
} info_t;

using namespace std;

int main(){ 
    FILE* p_bmp = fopen("test.bmp", "rb");
 
    header_t header;
    info_t info;

    fread(&header, 14, 1, p_bmp);
    fread(&info, 40, 1, p_bmp);
    
    cout << "Naglowek indyfikacji pliku: " << header.signature[0] << header.signature[1] << endl;
	cout << "Wielkosc naglowka: " << header.size << endl;
    cout << "Wymiary obrazu: " << info.height << "x" << info.width  << endl;
    cout << "Warstwy kolorow: " << info.color_planes << endl;
    cout << "Liczba bitow na piksel: " << info.color_depth << endl;
	cout << "Algorytm kompresji: " << info.compression << endl;
	cout << "Rozmiar rysunku: " << info.raw_size << endl;
	cout << "Rozdzielczosc pozioma: " << info.horizontal_ppm << endl;
	cout << "Rozdzielczosc pionowa: " << info.vertical_ppm << endl;
	
    return 0;
}
